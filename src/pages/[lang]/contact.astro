---
// src/pages/[lang]/contact.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getLangFromUrl } from '../../i18n/utils';
import { ui } from '../../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = ui[lang];

// All server-side logic has been removed as Formspree and Calendly handle everything.
---
<BaseLayout title={t['contact.title']} description={t['contact.description']}>

  <!-- Main Section Container -->
  <section class="py-16 md:py-24 bg-background-dark text-text-light">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">

      <!-- Page Header -->
      <div class="text-center max-w-3xl mx-auto">
        {/* FIX: Replaced 'contact.mainHeading' with 'contact.heading' */}
        <h1 class="font-heading text-4xl font-bold tracking-tight sm:text-5xl">{t['contact.heading']}</h1>
        {/* FIX: Replaced 'contact.mainSubtitle' with 'contact.subtitle' */}
        <p class="mt-4 text-lg text-text-light/80">{t['contact.subtitle']}</p>
      </div>

      <!-- =============================================================== -->
      <!-- SECTION 1: BOOK A CALL (Primary Call-to-Action)                -->
      <!-- =============================================================== -->
      <div class="mt-16 max-w-4xl mx-auto">
        <div class="text-center mb-8">
          {/* FIX: Replaced 'meeting.title' with a valid key. See note below. */}
          <h2 class="font-heading text-3xl font-semibold">{t['contact.heading']}</h2>
          {/* FIX: Replaced 'meeting.description' with a valid key. See note below. */}
          <p class="mt-2 text-text-light/70">{t['contact.subtitle']}</p>
        </div>

        <!-- Card container for a polished look -->
        <div class="bg-card-dark border border-white/10 rounded-2xl overflow-hidden shadow-2xl">
          <!-- Calendly Inline Widget Start -->
          <!-- The 'data-url' includes your custom primary color -->
          <div 
            class="calendly-inline-widget min-h-[700px]" 
            data-url="https://calendly.com/contact-veermandev/30min?primary_color=0a84ff"
          ></div>
          <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
          <!-- Calendly Inline Widget End -->
        </div>
      </div>

      <!-- Visual Separator -->
      <div class="relative my-20">
        <div class="absolute inset-0 flex items-center" aria-hidden="true">
          <div class="w-full border-t border-gray-700"></div>
        </div>
        <div class="relative flex justify-center">
          <span class="bg-background-dark px-4 text-sm font-medium text-gray-400">OR</span>
        </div>
      </div>

      <!-- =============================================================== -->
      <!-- SECTION 2: CONTACT FORM (Secondary Call-to-Action)              -->
      <!-- =============================================================== -->
      <div class="max-w-lg mx-auto">
        <div class="text-center mb-8">
          {/* FIX: Replaced 'contact.formTitle' with 'contact.title' */}
          <h2 class="font-heading text-3xl font-semibold">{t['contact.title']}</h2>
          <p class="mt-2 text-text-light/70">{t['contact.subtitle']}</p>
        </div>

        <!-- Formspree Form with improved styling -->
        <form 
          action="https://formspree.io/f/xdklqakn" 
          method="POST" 
          class="space-y-6"
        >
          <!-- Name Field -->
          <div>
            <label for="name" class="block mb-2 text-sm font-medium text-text-light/90">{t['contact.name']}</label>
            <input
              type="text"
              id="name"
              name="name"
              placeholder={t['contact.namePlaceholder']}
              class="w-full p-3 border border-gray-600 rounded-lg bg-dark-slate text-white focus:ring-2 focus:ring-primary focus:border-transparent transition"
              required
            />
          </div>

          <!-- Email Field -->
          <div>
            <label for="email" class="block mb-2 text-sm font-medium text-text-light/90">{t['contact.email']}</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder={t['contact.emailPlaceholder']}
              class="w-full p-3 border border-gray-600 rounded-lg bg-dark-slate text-white focus:ring-2 focus:ring-primary focus:border-transparent transition"
              required
            />
          </div>

          <!-- Message Field -->
          <div>
            <label for="message" class="block mb-2 text-sm font-medium text-text-light/90">{t['contact.message']}</label>
            <textarea
              id="message"
              name="message"
              placeholder={t['contact.messagePlaceholder']}
              class="w-full p-3 border border-gray-600 rounded-lg bg-dark-slate text-white focus:ring-2 focus:ring-primary focus:border-transparent transition"
              rows="5"
              required
            ></textarea>
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="w-full bg-primary text-dark font-semibold px-6 py-3 rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background-dark focus:ring-primary transition-colors"
          >
            {t['contact.submit']}
          </button>
        </form>
      </div>

    </div>
  </section>
</BaseLayout>

