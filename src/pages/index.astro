---
import { ui, defaultLang } from '../i18n/ui';

const supportedLangs = Object.keys(ui);
const acceptHeader = Astro.request.headers.get('accept-language') ?? '';
const detectedLang = acceptHeader
  .split(',')
  .map(l => l.split(';')[0].trim())
  .find(l => supportedLangs.includes(l)) ?? defaultLang;

return Astro.redirect(`/${detectedLang}/home`, 307);
---
