---
// src/pages/[lang]/[slug].astro
import { ui } from '../../i18n/config';

// Capture language and slug
const { lang, slug } = Astro.params as { lang: keyof typeof ui; slug: string };

// Validate language
if (!(lang in ui)) {
  throw new Error(`Unsupported language: ${lang}`);
}

// List of pages handled by this dynamic route
const pageTitles: Record<string, Record<string, string>> = {
  nl: {
    'over-ons': 'Over Ons',
    portfolio: 'Portfolio',
    prijzen: 'Prijzen',
    contact: 'Contact',
    tijdlijn: 'Tijdlijn',
  },
  en: {
    about: 'About Us',
    portfolio: 'Portfolio',
    pricing: 'Pricing',
    contact: 'Contact',
    timeline: 'Timeline',
  },
};

const pageDescriptions: Record<string, Record<string, string>> = {
  nl: {
    'over-ons': 'Maak kennis met ons team en onze expertise.',
    portfolio: 'Bekijk onze projecten en cases.',
    prijzen: 'Ontdek onze tarieven en pakketten.',
    contact: 'Neem contact op met ons team.',
    tijdlijn: 'Onze roadmap en belangrijke mijlpalen.',
  },
  en: {
    about: 'Meet our team and discover our expertise.',
    portfolio: 'Explore our projects and cases.',
    pricing: 'Discover our pricing and packages.',
    contact: 'Get in touch with our team.',
    timeline: 'Our roadmap and key milestones.',
  },
};

// Redirect `/home` or unknown slugs to the homepage
if (slug === 'home' || !(slug in pageTitles[lang])) {
  return Astro.redirect(`/${lang}/home`, 307);
}

// Page info
const title = pageTitles[lang][slug];
const description = pageDescriptions[lang][slug];
const t = ui[lang];
---

<BaseLayout title={title} description={description}>
  <section class="container mx-auto py-12 px-6 fade-in">
    <h1 class="text-4xl md:text-5xl font-heading font-bold mb-6">{title}</h1>
    <p class="text-lg md:text-xl text-opacity-80 mb-8">{description}</p>

    <div class="prose dark:prose-invert lg:prose-xl">
      {slug === 'over-ons' && (
        <>
          <p>
            {lang === 'nl'
              ? 'Wij zijn een team van ervaren ontwikkelaars, ontwerpers en data-specialisten die digitale oplossingen creÃ«ren voor bedrijven van elke omvang.'
              : 'We are a team of experienced developers, designers, and data specialists creating digital solutions for businesses of all sizes.'}
          </p>
          <p>
            {lang === 'nl'
              ? 'Onze focus ligt op performance, schaalbaarheid en moderne webstandaarden, zodat elke website toekomstbestendig is.'
              : 'Our focus is on performance, scalability, and modern web standards, ensuring every website is future-proof.'}
          </p>
        </>
      )}
      {slug === 'portfolio' && (
        <p>{lang === 'nl' ? 'Hier presenteren we onze recente projecten.' : 'Here we showcase our recent projects.'}</p>
      )}
      {slug === 'prijzen' && (
        <p>{lang === 'nl' ? 'Bekijk onze transparante en eerlijke tarieven.' : 'Check out our transparent and fair pricing.'}</p>
      )}
      {slug === 'contact' && (
        <p>{lang === 'nl' ? 'Neem contact met ons op voor een vrijblijvende offerte.' : 'Get in touch with us for a quote.'}</p>
      )}
      {slug === 'tijdlijn' && (
        <p>{lang === 'nl' ? 'Bekijk onze belangrijkste mijlpalen en roadmap.' : 'See our key milestones and roadmap.'}</p>
      )}
    </div>
  </section>
</BaseLayout>