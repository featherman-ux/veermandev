
---
import BaseLayout from '../../layouts/BaseLayout.astro';
import HeroSection from '../../components/sections/HeroSection.astro';
import TypewriterText from '../../components/ui/TypewriterText.astro';
import { getLangFromUrl, useTranslations, useTranslatedPath } from '../../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const tp = useTranslatedPath(lang);

const pageTitle = t('home.page.title');
const pageDescription = t('home.page.description');
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <!-- LAUNCH OFFER BANNER -->
  <section class="launch-banner py-3 px-4 bg-gradient-to-r from-orange-500 to-red-500 text-white text-center relative overflow-hidden">
    <div class="max-w-4xl mx-auto relative z-10">
      <p class="text-sm font-medium">
        🤝 <strong>Kennismakingsaanbieding:</strong> €100 korting op je eerste project & gratis merkcheck.
      </p>
    </div>
    <div class="banner-shine absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent transform -skew-x-12 animate-shine"></div>
  </section>


  <!-- PROBLEEM-GEFOCUSTE HERO -->
<HeroSection 
  subtitle="Ook kleine bedrijven verdienen grote websites"
  description="Ontwerp een professionele online aanwezigheid die écht converteert."
  trustSignals={[
    "⚡ Laadtijd < 1 seconde – sneller dan WordPress",
    "📱 Mobile-first – 70% van bezoekers komt via telefoon",
    "🔍 SEO geoptimaliseerd – gevonden in Google & Maps",
    "🤝 Eén aanspreekpunt – geen gedoe met bureaus",
    "✅ Transparante prijs – geen verborgen maandkosten"
  ]}
>
  <span class="typewriter-heading text-center">
    <span class="typewriter-heading__label">Samen bouwen we aan</span>
    <TypewriterText 
      words={["een merk dat opvalt", "online vertrouwen", "jouw digitale toekomst", "meer klanten online"]}
      className="typewriter-heading__text text-primary"
      initialText="een merk dat opvalt"
    />
  </span>

      <!-- IMMEDIATE CTA -->
    <div class="hero-cta mt-8">
      <a href={tp('contact')} class="inline-block bg-primary hover:bg-primary/90 text-black font-bold py-4 px-8 rounded-lg text-lg transition-all transform hover:scale-105 shadow-lg">
        Plan je gratis adviesgesprek
      </a>
      <p class="text-sm opacity-70 mt-3">Persoonlijk contact - Geen verplichtingen</p>
    </div>
  </HeroSection>

<section class="pain-points-section py-16 px-4 bg-card-light dark:bg-card-dark/60 border border-primary/10 rounded-3xl shadow-lg shadow-primary/5 reveal-on-scroll">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="font-heading font-bold text-4xl mb-4">Waar lopen <span class="text-primary">ondernemers</span> tegenaan?</h2>
      <p class="text-lg opacity-80 max-w-3xl mx-auto">
        We merken dat veel MKB’ers met dezelfde uitdagingen worstelen. Ze zijn herkenbaar, maar gelukkig ook oplosbaar.
      </p>
    </div>

    <div class="grid md:grid-cols-3 gap-8">
      <div class="h-full bg-white/90 dark:bg-background-dark rounded-2xl border border-primary/10 p-8 shadow-sm shadow-primary/10 transition-transform duration-300 hover:-translate-y-1">
        <div class="flex items-center gap-4 mb-4">
          <span class="flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold">01</span>
          <h3 class="text-xl font-semibold">Moeilijk vindbaar</h3>
        </div>
        <p class="text-base opacity-80">
          Een mooie website alleen is niet genoeg. Zonder zichtbaarheid in zoekmachines en lokale listings laten bedrijven kansen liggen.
        </p>
      </div>

      <div class="h-full bg-white/90 dark:bg-background-dark rounded-2xl border border-primary/10 p-8 shadow-sm shadow-primary/10 transition-transform duration-300 hover:-translate-y-1">
        <div class="flex items-center gap-4 mb-4">
          <span class="flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold">02</span>
          <h3 class="text-xl font-semibold">Geen sterke indruk</h3>
        </div>
        <p class="text-base opacity-80">
          Bezoekers oordelen in seconden. Een rommelige of verouderde uitstraling kost vertrouwen en maakt het lastig om op te vallen.
        </p>
      </div>

      <div class="h-full bg-white/90 dark:bg-background-dark rounded-2xl border border-primary/10 p-8 shadow-sm shadow-primary/10 transition-transform duration-300 hover:-translate-y-1">
        <div class="flex items-center gap-4 mb-4">
          <span class="flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary font-semibold">03</span>
          <h3 class="text-xl font-semibold">Tijdsdruk</h3>
        </div>
        <p class="text-base opacity-80">
          Ondernemers willen zich richten op hun bedrijf, niet op plug-ins, updates of technische rompslomp. Ze zoeken een partner die ontzorgt.
        </p>
      </div>
    </div>
  </div>
</section>

<section class="comparison-section py-16 px-4">
  <div class="comparison-container max-w-6xl mx-auto bg-card-light dark:bg-card-dark border border-primary/10 rounded-3xl overflow-hidden shadow-xl shadow-primary/10">
    <div class="bg-gradient-to-r from-primary to-blue-500 text-white p-10 text-center">
      <h2 class="font-heading font-bold text-4xl mb-2">Wat past bij jouw ambitie?</h2>
      <p class="text-base opacity-90 max-w-3xl mx-auto">
        Drie routes naar jouw website.
      </p>
    </div>

    <div class="grid md:grid-cols-3 gap-0">
      <div class="p-8 flex flex-col border-b md:border-b-0 md:border-r border-primary/10 text-center">
        <div class="text-sm uppercase tracking-wide text-primary/80 mb-3">Optie 1</div>
        <h3 class="text-2xl font-semibold mb-4">🔧 Zelf bouwen</h3>
        <ul class="space-y-3 text-base opacity-80 flex-1 text-left mx-auto max-w-xs">
          <li>• Beperkte sjablonen & weinig merkbeleving</li>
          <li>• Technische kennis én tijd nodig</li>
          <li>• Vaak problemen met snelheid en onderhoud</li>
        </ul>
        <div class="mt-8 rounded-xl bg-background-light dark:bg-background-dark p-4 text-center flex flex-col items-center gap-1">
          <span class="text-sm uppercase tracking-wide opacity-70">Resultaat</span>
          <p class="font-semibold">Basis: een site die snel zijn grenzen bereikt</p>
        </div>
      </div>

      <div class="p-8 flex flex-col border-b md:border-b-0 md:border-r border-primary/10 text-center">
        <div class="text-sm uppercase tracking-wide text-primary/80 mb-3">Optie 2</div>
        <h3 class="text-2xl font-semibold mb-4">📦 Templates via bureaus</h3>
        <ul class="space-y-3 text-base opacity-80 flex-1 text-left mx-auto max-w-xs">
          <li>• WordPress/Wix afhankelijkheid & plug-in chaos</li>
          <li>• Hogere kosten zonder echt maatwerk</li>
          <li>• Laadtijden en veiligheid vaak een risico</li>
        </ul>
        <div class="mt-8 rounded-xl bg-background-light dark:bg-background-dark p-4 text-center flex flex-col items-center gap-1">
          <span class="text-sm uppercase tracking-wide opacity-70">Resultaat</span>
          <p class="font-semibold">Beperkt: prima start, maar niet toekomstbestendig</p>
        </div>
      </div>

      <div class="p-8 flex flex-col bg-gradient-to-b from-primary/5 to-transparent md:rounded-ss-[0] md:rounded-se-3xl text-center">
        <div class="text-sm uppercase tracking-wide text-primary/80 mb-3">Optie 3</div>
        <h3 class="text-2xl font-semibold mb-4 text-primary">🚀 Veerman<wbr>Development</h3>
        <ul class="space-y-3 text-base flex-1 text-left mx-auto max-w-xs">
          <li class="flex items-start gap-2"><span class="text-primary">•</span><span>Maatwerk-code met moderne technologieën</span></li>
          <li class="flex items-start gap-2"><span class="text-primary">•</span><span>Laadtijd &lt; 1 seconde, SEO en performance inbegrepen</span></li>
          <li class="flex items-start gap-2"><span class="text-primary">•</span><span>Heldere strategie en design vanuit één team</span></li>
          <li class="flex items-start gap-2"><span class="text-primary">•</span><span>Transparante prijzen zonder verborgen onderhoudskosten</span></li>
        </ul>
        <div class="mt-8 rounded-xl bg-primary/10 border border-primary/30 p-4 text-center flex flex-col items-center gap-1">
          <span class="text-sm uppercase tracking-wide text-primary/90">Resultaat</span>
          <p class="font-semibold text-primary">Premium: een groeiplatform dat vertrouwen en klanten oplevert</p>
        </div>
      </div>
    </div>
  </div>
</section>

      <!-- UNIQUE VALUE PROPOSITION -->
      <div class="uvp-section bg-gradient-to-r from-primary/5 to-blue-50 dark:from-primary/10 dark:to-blue-900/20 p-8 rounded-xl">
        <h3 class="text-2xl font-bold text-center mb-6">Onze unieke MKB-formule:</h3>
        <div class="grid md:grid-cols-4 gap-6 text-center">
          <div class="uvp-item">
            <div class="text-3xl mb-3">🧠</div>
            <div class="font-semibold mb-2">Strategie</div>
            <div class="text-sm opacity-80">Merkpositionering die u onderscheidt</div>
          </div>
          <div class="uvp-item">
            <div class="text-3xl mb-3">⚡</div>
            <div class="font-semibold mb-2">Techniek</div>
            <div class="text-sm opacity-80">Modern, snel en toekomstbestendig</div>
          </div>
          <div class="uvp-item">
            <div class="text-3xl mb-3">🎯</div>
            <div class="font-semibold mb-2">Conversie</div>
            <div class="text-sm opacity-80">Elke pagina ontworpen om te verkopen</div>
          </div>
          <div class="uvp-item">
            <div class="text-3xl mb-3">🤝</div>
            <div class="font-semibold mb-2">Partnership</div>
            <div class="text-sm opacity-80">Uw groeipartner voor de lange termijn</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- LAUNCH PRICING PACKAGES - COMPLETELY FIXED LAYOUT -->
  <section class="packages-overview py-6 px-4 reveal-on-scroll">
    <div class="max-w-7xl mx-auto">
      <div class="text-center mb-16">
        <h2 class="font-heading font-bold text-4xl mb-4">Kies jouw <span class="text-primary">merk<wbr>transformatie</span></h2>
        <p class="text-lg opacity-80">€100 korting op alle pakketten + complete merkstrategie inbegrepen. Jouw partner in digitale groei.</p>
      </div>
      
      <!-- COMPLETELY FIXED PACKAGES GRID -->
      <div class="packages-grid grid lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
        <!-- Package 1: Foundation -->
        <div class="package-card subtle-card bg-card-light dark:bg-card-dark rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group cursor-pointer relative flex flex-col">
          <!-- Launch offer badge -->
          <div class="card-bg absolute inset-0 bg-gradient-to-br from-primary/5 to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"></div>
          
          <div class="relative z-10 p-6 flex flex-col flex-grow text-center">
            <div class="pricing-section mb-4">
              <div class="original-price text-lg text-gray-500 line-through">€449</div>
              <div class="package-price text-3xl font-bold text-primary">€349</div>
              <div class="savings text-sm text-green-600 font-medium">Bespaar €100</div>
            </div>
            
            <h4 class="text-xl font-semibold mb-4 group-hover:text-primary transition-colors duration-300">Foundation</h4>
            <p class="text-sm opacity-60 mb-2">Perfect voor</p>
            <p class="font-medium mb-6">Zzp'ers en kleine teams die snel een professionele, duidelijke website willen</p>
            
            <ul class="space-y-3 mb-8 text-sm flex-grow text-left mx-auto max-w-xs">
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>3-5 pagina's</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Heldere call-to-actions en contactformulieren</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Google Business-profiel check & basis SEO instellingen</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Responsive design en snelle hosting inbegrepen</span>
              </li>
            </ul>
            
            <div class="example-link text-xs text-primary opacity-70 mb-4 text-center">
              Voorbeeld: dienstverlener met duidelijke propositie en contactknoppen
            </div>

            <a href={tp('contact')} class="block text-center bg-primary text-black font-semibold py-3 px-6 rounded-lg hover:bg-primary/90 transition-all mt-auto">
              Start je eerste website
            </a>
          </div>
        </div>
        
        <!-- Package 2: Growth (Most Chosen) -->
        <div class="package-card subtle-card bg-card-light dark:bg-card-dark rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group cursor-pointer relative border-2 border-primary flex flex-col">
          <!-- More visible popular badge -->
          <div class="popular-badge-container absolute -top-4 left-0 right-0 flex justify-center z-30">
            <div class="popular-badge bg-primary text-black px-5 py-2 rounded-full text-sm font-bold shadow-lg border-2 border-white dark:border-gray-800">
              ⭐ Meest Gekozen
            </div>
          </div>
          <!-- Launch offer badge -->
          <div class="card-bg absolute inset-0 bg-gradient-to-br from-primary/5 to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"></div>
          
          <div class="relative z-10 p-6 pt-8 flex flex-col flex-grow text-center">
            <div class="pricing-section mb-4">
              <div class="original-price text-lg text-gray-500 line-through">€649</div>
              <div class="package-price text-3xl font-bold text-primary">€549</div>
              <div class="savings text-sm text-green-600 font-medium">Bespaar €100</div>
            </div>
            
            <h4 class="text-xl font-semibold mb-4 group-hover:text-primary transition-colors duration-300">Growth</h4>
            <p class="text-sm opacity-60 mb-2">Perfect voor</p>
            <p class="font-medium mb-6">Dienstverleners en lokale retail die online leads en reserveringen willen</p>
            
            <ul class="space-y-3 mb-8 text-sm flex-grow text-left mx-auto max-w-xs">
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Alles uit Foundation plus uitbreidbare sitemap (5-8 pagina's)</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Conversieflows voor offertes, reserveringen of afspraken</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Lokale SEO-pagina's met geo-gerichte zoekwoorden</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Blog/nieuws of portfolio module inclusief training voor zelfbeheer</span>
              </li>
            </ul>
            
            <div class="example-link text-xs text-primary opacity-70 mb-4 text-center">
              Voorbeeld: waarisniels.nl – groeien van persoonlijk project naar autoriteit
            </div>

            <a href={tp('contact')} class="block text-center bg-primary text-black font-semibold py-3 px-6 rounded-lg hover:bg-primary/90 transition-all mt-auto">
              Activeer je online groei
            </a>
          </div>
        </div>
        
        <!-- Package 3: Complete -->
        <div class="package-card subtle-card bg-card-light dark:bg-card-dark rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group cursor-pointer relative flex flex-col">
          <!-- Launch offer badge -->
          <div class="card-bg absolute inset-0 bg-gradient-to-br from-primary/5 to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl"></div>
          
          <div class="relative z-10 p-6 flex flex-col flex-grow text-center">
            <div class="pricing-section mb-4">
              <div class="original-price text-lg text-gray-500 line-through">€849</div>
              <div class="package-price text-3xl font-bold text-primary">€749</div>
              <div class="savings text-sm text-green-600 font-medium">Bespaar €100</div>
            </div>
            
            <h4 class="text-xl font-semibold mb-4 group-hover:text-primary transition-colors duration-300">Complete</h4>
            <p class="text-sm opacity-60 mb-2">Perfect voor</p>
            <p class="font-medium mb-6">Ondernemers die online willen verkopen of processen willen automatiseren</p>
            
            <ul class="space-y-3 mb-8 text-sm flex-grow text-left mx-auto max-w-xs">
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Alles uit Growth plus product- of dienstencatalogus</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Webshop of maatwerk bestelflow met betalingen</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Koppelingen met voorraadbeheer, CRM of e-mailmarketing</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Automatisering voor leads, loyaliteit of abonnementen</span>
              </li>
              <li class="flex items-start gap-3">
                <span class="text-green-500 text-lg flex-shrink-0">✓</span>
                <span>Strategisch plan voor groei</span>
              </li>
            </ul>
            
            <div class="example-link text-xs text-primary opacity-70 mb-4 text-center">
              Voorbeeld: sales-ready platform met integraties en automatisering
            </div>

            <a href={tp('contact')} class="block text-center bg-primary text-black font-semibold py-3 px-6 rounded-lg hover:bg-primary/90 transition-all mt-auto">
              Transformeer je bedrijf online
            </a>
          </div>
        </div>
      </div>
      
      <!-- Brand strategy details -->
      <div class="brand-included mt-16 text-center bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg">
        <h3 class="font-semibold mb-4">Complete merkstrategie inbegrepen bij elk pakket:</h3>
        <div class="grid md:grid-cols-5 gap-4 text-sm">
          <div>✓ Merkpositionering strategie</div>
          <div>✓ Klantgericht actieplan</div>
          <div>✓ Zichtbaarheidsoptimalisatie</div>
          <div>✓ Marktdifferentiatie</div>
          <div>✓ Groeipartnerschap</div>
        </div>
        <p class="text-xs opacity-60 mt-4">Lanceringsaanbieding: Deze uitgebreide merkstrategie kost normaal €200+</p>
      </div>
    </div>
  </section>

 <!-- Success Transformation - Toned Down -->
<section class="success-example py-20 px-4 bg-card-light dark:bg-card-dark reveal-on-scroll">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="font-heading font-bold text-4xl mb-4">Case: <span class="text-primary">waarisniels.nl</span></h2>
      <p class="text-lg opacity-80">Een persoonlijk reisblog groeide uit tot een professioneel platform met dagelijks verkeer en samenwerkingen dankzij een duidelijk verhaal en snelle techniek.</p>
    </div>

    <div class="transformation-grid grid lg:grid-cols-2 gap-12 items-center">
      <div class="transformation-image">
        <img src="/portfolio/waarisniels-mockup.jpg" alt="Reisblog Website" class="w-full h-80 object-cover rounded-lg" loading="lazy" decoding="async" />
      </div>

      <div class="transformation-content">
        <h3 class="text-2xl font-semibold mb-4">Wat we hebben gedaan</h3>
        <p class="mb-6">We gebruikten een minimalistisch ontwerp en maakte de site persoonlijk en aantrekkelijk voor terugkerende bezoekers.</p>

        <ul class="space-y-4 text-sm">
          <li class="flex items-start gap-3">
            <span class="text-primary text-lg">✓</span>
            <span>Laadtijden onder één seconde, ook met grote beeldmaterialen.</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-primary text-lg">✓</span>
            <span>Automatisch gegroepeerde verhalen met kaarten en thema's voor eenvoudig navigeren.</span>
          </li>
          <li class="flex items-start gap-3">
            <span class="text-primary text-lg">✓</span>
            <span>Contentstrategie die blog, nieuwsbrief en social media aan elkaar verbindt.</span>
          </li>
        </ul>

        <a href="https://waarisniels.nl" target="_blank" class="text-primary font-medium hover:underline inline-flex items-center gap-2 mt-6">
          Bekijk de live site
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
</section>

  <!-- OUR PARTNERSHIP PROCESS -->
  <section class="partnership-process py-24 px-4 reveal-on-scroll">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="font-heading font-bold text-4xl mb-16">Zo werken we <span class="text-primary">samen</span></h2>
      
      <div class="process-steps grid md:grid-cols-3 gap-12">
        <div class="step">
          <div class="step-number w-16 h-16 bg-primary text-black rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-6">1</div>
          <h3 class="text-xl font-semibold mb-4"> Kennismaking</h3>
          <p class="text-sm opacity-80">We starten met een praktische sessie waarin we jouw doelen, doelgroep en huidige kanalen in kaart brengen. Alles draait om jouw verhaal.</p>
        </div>
        
        <div class="step">
          <div class="step-number w-16 h-16 bg-primary text-black rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-6">2</div>
          <h3 class="text-xl font-semibold mb-4">Ontwerpen & bouwen</h3>
          <p class="text-sm opacity-80">Je ontvangt wireframes, copyvoorstellen en designpreviews. Zodra je tevreden bent, bouwen we de site en koppelen we alle tools.</p>
        </div>
        
        <div class="step">
          <div class="step-number w-16 h-16 bg-primary text-black rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-6">3</div>
          <h3 class="text-xl font-semibold mb-4">Lanceren & doorpakken</h3>
          <p class="text-sm opacity-80">We lanceren samen, monitoren de eerste resultaten en plannen verbeteringen. Je kunt op ons rekenen voor support en verdere optimalisatie.</p>
        </div>
      </div>
      
      <!-- Partnership commitment -->
      <div class="partnership-commitment mt-16 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 p-6 rounded-lg border border-orange-200 dark:border-orange-800">
        <p class="font-semibold text-orange-800 dark:text-orange-300">
          🤝 <strong>Partnerschapsbelofte:</strong> je krijgt één betrokken sparringpartner die bereikbaar blijft na livegang.
        </p>
      </div>
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Enhanced scroll reveals
      const observerOptions = {
        root: null,
        rootMargin: '-50px',
        threshold: 0.1
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;

            if (!(element instanceof HTMLElement)) return;
            element.style.opacity = '1';
            element.style.transform = 'translateY(0) scale(1)';
            
            // Stagger children animation
            const children = element.querySelectorAll('.package-card, .result-item, .step, .difference-card');
            children.forEach((child, childIndex) => {
              if (!(child instanceof HTMLElement)) return;

              const childElement = child;
              setTimeout(() => {
                childElement.style.opacity = '1';
                childElement.style.transform = 'translateY(0)';
              }, childIndex * 150);
            });
          }
        });
      }, observerOptions);

      // Apply to sections
      const sections = document.querySelectorAll('.reveal-on-scroll');
      sections.forEach(section => {
        if (!(section instanceof HTMLElement)) return;

        const element = section;
        element.style.opacity = '0';
        element.style.transform = 'translateY(30px) scale(0.98)';
        element.style.transition = 'opacity 0.8s cubic-bezier(0.16, 1, 0.3, 1), transform 0.8s cubic-bezier(0.16, 1, 0.3, 1)';
        observer.observe(element);
      });

      // Subtle card effects
      const subtleCards = document.querySelectorAll('.subtle-card');
      subtleCards.forEach(card => {
        if (!(card instanceof HTMLElement)) return;

        const cardElement = card;
        
        cardElement.addEventListener('mousemove', (e) => {
          const rect = cardElement.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const y = e.clientY - rect.top;
          
          const centerX = rect.width / 2;
          const centerY = rect.height / 2;
          
          const rotateX = (y - centerY) / 80;
          const rotateY = (centerX - x) / 80;
          
          cardElement.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(3px)`;
        });
        
        cardElement.addEventListener('mouseleave', () => {
          cardElement.style.transform = 'perspective(1000px) rotateX(0deg) rotateY(0deg) translateZ(0px)';
        });
      });
    });
  </script>

  <script>
    document.addEventListener('astro:page-load', () => {
      const typewriterElement = document.querySelector('.typewriter-heading');
      if (!typewriterElement) return;

      let scrollTimeout: number;
      let isScrolling = false;

      const handleScroll = () => {
        if (!isScrolling) {
          typewriterElement.classList.add('is-paused');
          isScrolling = true;
        }
        
        window.clearTimeout(scrollTimeout);
        
        scrollTimeout = window.setTimeout(() => {
          typewriterElement.classList.remove('is-paused');
          isScrolling = false;
        }, 150);
      };

      window.addEventListener('scroll', handleScroll, { passive: true });

      // Cleanup on page navigation
      document.addEventListener('astro:before-swap', () => {
        window.removeEventListener('scroll', handleScroll);
        window.clearTimeout(scrollTimeout);
      }, { once: true });
    });
  </script>

  <style>
    /* Launch banner animation */
    @keyframes shine {
      0% { transform: translateX(-100%) skewX(-12deg); }
      100% { transform: translateX(200%) skewX(-12deg); }
    }
    
    .animate-shine {
      animation: shine 3s ease-in-out infinite;
    }

    .subtle-card {
      transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.3s cubic-bezier(0.16, 1, 0.3, 1);
      transform-style: preserve-3d;
    }

    .subtle-card:hover {
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
    }

    /* Fixed popular badge with better visibility */
    .popular-badge-container {
      z-index: 30;
    }
    
    .popular-badge {
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
      white-space: nowrap;
      animation: badgeFloat 3s ease-in-out infinite;
    }

    /* Add some movement to draw attention */
    @keyframes badgeFloat {
      0%, 100% { 
        transform: translateY(0) scale(1); 
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
      }
      50% { 
        transform: translateY(-2px) scale(1.02); 
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.6);
      }
    }

    /* Launch offer badges */
    .launch-offer-badge {
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }

    /* Professional shine effect */
    .professional-shine {
      animation: professionalShine 4s ease-in-out infinite;
    }
    
    @keyframes professionalShine {
      0%, 100% { transform: translateX(-100%) skewX(-12deg); opacity: 0; }
      50% { transform: translateX(100%) skewX(-12deg); opacity: 0.3; }
    }
    
    /* COMPLETELY FIXED COMPARISON COLUMNS */
    .comparison-column {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      min-height: 450px;
      display: flex;
      flex-direction: column;
    }
    
    .comparison-column:hover {
      transform: translateY(-5px);
    }

    /* Brand philosophy styling */
    .philosophy-left, .philosophy-right {
      animation: fadeInUp 0.8s ease-out forwards;
    }

    .philosophy-right {
      animation-delay: 0.2s;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* COMPLETELY FIXED DIFFERENCE CARDS */
    .difference-card {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      min-height: 280px;
      display: flex;
      flex-direction: column;
    }

    .difference-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    /* COMPLETELY FIXED PACKAGE GRID */
    .packages-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      align-items: stretch;
    }
    
    .package-card {
      min-height: 600px;
      display: flex;
      flex-direction: column;
    }
    
    /* Better mobile responsive grid */
    @media (max-width: 1024px) {
      .packages-grid {
        grid-template-columns: 1fr;
        max-width: 400px;
        margin: 0 auto;
      }
    }
    
    @media (min-width: 1024px) {
      .packages-grid {
        grid-template-columns: repeat(3, 1fr);
      }
    }

    /* Fix flex-shrink for icons */
    .flex-shrink-0 {
      flex-shrink: 0;
    }
    
    /* Ensure flex-grow works properly */
    .flex-grow {
      flex-grow: 1;
    }
  </style>
</BaseLayout>
