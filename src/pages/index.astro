---
import { ui, defaultLang } from '../i18n/ui';

const supportedLangs = Object.keys(ui);
const acceptHeader = Astro.request.headers.get('accept-language') ?? '';

return Astro.redirect(
  `/${
    acceptHeader
      .split(',')
      .map((lang) => lang.split(';')[0].trim())
      .find((lang) => supportedLangs.includes(lang)) ?? defaultLang
  }/home`,
  307
);
---
